@if($plugin->getData() && isset($plugin->getData()[$server->uid])) 
    <div class="quicktip d-flex" style="margin-left: 20px;">
        <div class="quicktip-icon"><svg version="1.1"
            id="svg30" inkscape:version="0.92.2 5c3e80d, 2017-08-06" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns:svg="http://www.w3.org/2000/svg"
            xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 93.5 110"
            style="enable-background:new 0 0 93.5 110;" xml:space="preserve">
        <style type="text/css">
            .st0{fill:#93C83E;}
            .st1{fill:#3DC7F4;}
            .st2{fill:#F89A1C;}
        </style>
        <sodipodi:namedview  bordercolor="#666666" borderopacity="1" fit-margin-bottom="10" fit-margin-left="10" fit-margin-right="10" fit-margin-top="10" gridtolerance="10" guidetolerance="10" id="namedview32" inkscape:current-layer="svg30" inkscape:cx="46.767" inkscape:cy="42.5" inkscape:pageopacity="0" inkscape:pageshadow="2" inkscape:window-height="480" inkscape:window-maximized="0" inkscape:window-width="640" inkscape:window-x="0" inkscape:window-y="0" inkscape:zoom="1.888" objecttolerance="10" pagecolor="#ffffff" showgrid="false">
            </sodipodi:namedview>
        <g id="g24" transform="translate(-3.233,5)">
            <path id="path2" inkscape:connector-curvature="0" d="M59.6,75.1v-2.8c0-5,2-9.7,5.5-13.1C69.6,55,72,49.4,72,43.3
                c0-12.1-9.9-22-22-22c-0.8,0-1.7,0-2.5,0.1c-10.5,1.2-18.9,10-19.4,20.6c-0.4,6.4,2.1,12.6,6.6,17c3.6,3.5,5.7,8.3,5.7,13.2v2.8
                c0,3,2.4,5.4,5.4,5.4h8.4C57.2,80.5,59.6,78.1,59.6,75.1z M55.9,76.3c0,0.8-0.7,1.5-1.5,1.5h-8.8c-0.8,0-1.5-0.7-1.5-1.5v-3
                c0-6.3-2.6-12.4-7.2-16.9c-3.9-3.8-6-9.1-5.7-14.6c0.5-9.1,7.7-16.7,16.7-17.7c0.7-0.1,1.4-0.1,2.2-0.1c10.4,0,18.8,8.5,18.8,18.8
                c0,5.2-2.1,10-5.8,13.6c-4.5,4.3-7.1,10.4-7.1,16.7L55.9,76.3L55.9,76.3z"/>
            <path id="path4" inkscape:connector-curvature="0" class="st0" d="M56.5,82.5h-13c-0.8,0-1.5,0.7-1.5,1.5s0.7,1.5,1.5,1.5h13
                c0.8,0,1.5-0.7,1.5-1.5S57.3,82.5,56.5,82.5z"/>
            <path id="path6" inkscape:connector-curvature="0" class="st1" d="M58,88.8c0-0.8-0.7-1.5-1.5-1.5h-13c-0.8,0-1.5,0.7-1.5,1.5
                s0.7,1.5,1.5,1.5h13C57.3,90.3,58,89.6,58,88.8z"/>
            <path id="path8" inkscape:connector-curvature="0" d="M14.7,43.3h8.6c0.8,0,1.5-0.7,1.5-1.5s-0.7-1.5-1.5-1.5h-8.6
                c-0.8,0-1.5,0.7-1.5,1.5S13.9,43.3,14.7,43.3z"/>
            <path id="path10" inkscape:connector-curvature="0" d="M86.8,41.8c0-0.8-0.7-1.5-1.5-1.5h-8.6c-0.8,0-1.5,0.7-1.5,1.5
                s0.7,1.5,1.5,1.5h8.6C86.1,43.3,86.8,42.6,86.8,41.8z"/>
            <path id="path12" inkscape:connector-curvature="0" d="M48.5,6.5v8.6c0,0.8,0.7,1.5,1.5,1.5s1.5-0.7,1.5-1.5V6.5
                C51.5,5.7,50.8,5,50,5S48.5,5.7,48.5,6.5z"/>
            <path id="path14" inkscape:connector-curvature="0" d="M73.9,15.8l-6.1,6.1c-0.6,0.6-0.6,1.5,0,2.1c0.3,0.3,0.7,0.4,1.1,0.4
                c0.4,0,0.8-0.1,1.1-0.4l6.1-6.1c0.6-0.6,0.6-1.5,0-2.1C75.4,15.2,74.5,15.2,73.9,15.8z"/>
            <path id="path16" inkscape:connector-curvature="0" d="M32.2,59.5c-0.6-0.6-1.5-0.6-2.1,0L24,65.6c-0.6,0.6-0.6,1.5,0,2.1
                c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4l6.1-6.1C32.8,61.1,32.8,60.1,32.2,59.5z"/>
            <path id="path18" inkscape:connector-curvature="0" d="M30.1,24c0.3,0.3,0.7,0.4,1.1,0.4s0.8-0.1,1.1-0.4c0.6-0.6,0.6-1.5,0-2.1
                l-6.1-6.1c-0.6-0.6-1.5-0.6-2.1,0c-0.6,0.6-0.6,1.5,0,2.1L30.1,24z"/>
            <path id="path20" inkscape:connector-curvature="0" d="M73.9,67.8c0.3,0.3,0.7,0.4,1.1,0.4c0.4,0,0.8-0.1,1.1-0.4
                c0.6-0.6,0.6-1.5,0-2.1l-6.1-6.1c-0.6-0.6-1.5-0.6-2.1,0s-0.6,1.5,0,2.1L73.9,67.8z"/>
            <path id="path22" inkscape:connector-curvature="0" class="st2" d="M54.8,93.5c0-0.8-0.7-1.5-1.5-1.5h-6.5c-0.8,0-1.5,0.7-1.5,1.5
                s0.7,1.5,1.5,1.5h6.5C54.1,95,54.8,94.3,54.8,93.5z"/>
        </g>
        </svg>
        </div>
        <div class="quicktip-content">
            <h3>{{ trans('messages.whitelabel.enabled.wording') }}</h3>
            <p>
                {!! trans('messages.whitelabel.enabled.intro', [
                    'selector' => $plugin->getData()[$server->uid],
                ]) !!}
            </p>
            <a href="{{ action("\Acelle\Plugin\AwsWhitelabel\Controllers\AwsWhitelabelController@index") }}"
                class="btn btn-secondary btn-outline">
                {{ trans('messages.whitelabel.settings') }}
            </a>
            <a href="{{ action("Admin\SendingServerController@whitelabelOff", $server->uid) }}"
                class="btn btn-mc_outline ml-2 whitelabel-off">
                {{ trans('messages.whitelabel.turn_off') }}
            </a>
        </div>
    </div>
@else
    <div class="quicktip grey d-flex" style="margin-left: 20px;padding:50px 60px;">
        <div class="quicktip-content">
            <h3>{{ trans('messages.whitelabel.title') }}</h3>
            <p>
                {{ trans('messages.whitelabel.wording') }}
            </p>
            <a href="{{ action("Admin\SendingServerController@whitelabelSettings", $server->uid) }}"
                class="btn btn-secondary btn-outline whitelabel-button">
                {{ trans('messages.whitelabel.enable') }}
            </a>
        </div>
    </div>
@endif

<script>
    var whitelabelPopup = new Popup();

    $('.whitelabel-button').on('click', function(e) {
        e.preventDefault();

        var url = $(this).attr('href');

        whitelabelPopup.load(url);
    });

    $('.whitelabel-off').on('click', function(e) {
        e.preventDefault();

        var url = $(this).attr('href');

        addMaskLoading();

        // 
        $.ajax({
            url: url,
            method: 'POST',
            data: {
                _token: CSRF_TOKEN,
            },
            globalError: false,
            statusCode: {
                // validate error
                400: function (res) {
                    whitelabelPopup.loadHtml(res.responseText);

                    // remove masking
                    removeMaskLoading();
                }
            },
            success: function (response) {
                removeMaskLoading();

                // notify
                notify(response.status, '{{ trans('messages.notify.success') }}', response.message); 

                whitelabelPopup.hide();

                whitelabelBox.load();
            }
        });
    });
</script>
